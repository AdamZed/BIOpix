package movement;

/**
 * @version 1.2.0
 */

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LineDrawingTool extends JComponent {

	private static final long serialVersionUID = 1L;
	private Image image;
	private Graphics2D g2;
	private Pair current = new Pair();
	private Pair first = new Pair();
	private Pair second = new Pair();
	private boolean load = true;

	public LineDrawingTool() {
		setDoubleBuffered(false);
		addMouseListener(new MouseAdapter() {
			public void mousePressed(MouseEvent e) {
				// save coord x,y when mouse is pressed
				first.setX(e.getX());
				first.setY(e.getY());
			}
		});

		addMouseMotionListener(new MouseMotionAdapter() {
			public void mouseDragged(MouseEvent e) {
				// coord x,y when drag mouse
				clear();
				current.setX(e.getX());
				current.setY(e.getY());
				g2.drawLine(first.getX(), first.getY(), current.getX(), current.getY());

			}
		});

		addMouseListener(new MouseAdapter() {
			public void mouseReleased(MouseEvent e) {
				second.setX(current.getX());
				second.setY(current.getY());
				g2.drawLine(first.getX(), first.getY(), second.getX(), second.getY());
			}
		});

	}

	protected void paintComponent(Graphics g) {
		if (image == null) {
			image = createImage(getSize().width, getSize().height);
			g2 = (Graphics2D) image.getGraphics();
			g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

			clear();
		}
		g.drawImage(image, 0, 0, null);

		if (load) {
			g2.drawLine(first.getX(), first.getY(), second.getX(), second.getY());
			load = false;
		}
	}

	// clear canvas (sets canvas white -> subject to change)
	public void clear() {
		g2.setPaint(Color.white);
		// draw white on entire draw area to clear
		g2.fillRect(0, 0, getSize().width, getSize().height);
		g2.setPaint(Color.black);
		repaint();
	}

	public void loadLine(Pair first, Pair second) {
		this.first = first;
		this.second = second;
		load = true;
	}

}
