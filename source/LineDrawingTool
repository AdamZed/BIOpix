package movement;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LineDrawingTool extends JComponent
{
    private Image image;
    private Graphics2D g2;
    private int currentX;
    private int currentY;
    private int firstX;
    private int firstY;

    public LineDrawingTool()
    {
        setDoubleBuffered(false);
        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e)
            {
                // save coord x,y when mouse is pressed
                    firstX = e.getX();
                    firstY = e.getY();
            }
        });

      addMouseMotionListener(new MouseMotionAdapter()
      {
      public void mouseDragged(MouseEvent e) {
        // coord x,y when drag mouse
        clear();
        currentX = e.getX();
        currentY = e.getY();
        g2.drawLine(firstX, firstY, currentX, currentY);

        }
    });

      addMouseListener(new MouseAdapter() {
      public void mouseReleased(MouseEvent e)
      {
          g2.drawLine(firstX, firstY, currentX, currentY);
       }
      });

  }

  protected void paintComponent(Graphics g)
  {
    if (image == null) {
      // image to draw null ==> we create
      image = createImage(getSize().width, getSize().height);
      g2 = (Graphics2D) image.getGraphics();
      // enable antialiasing
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
      // clear draw area
      clear();
    }

    g.drawImage(image, 0, 0, null);
  }

  // now we create exposed methods
  public void clear() {
    g2.setPaint(Color.white);
    // draw white on entire draw area to clear
    g2.fillRect(0, 0, getSize().width, getSize().height);
    g2.setPaint(Color.black);
    repaint();
  }



  public void black() {
    g2.setPaint(Color.black);
  }

}

class SwingPaint
{

  JButton clearBtn;
  LineDrawingTool drawArea;

  ActionListener actionListener = new ActionListener()
  {
    public void actionPerformed(ActionEvent e)
    {
      if (e.getSource() == clearBtn)
      {
        drawArea.clear();
      }
    }
  };

  public static void main(String[] args)
  {
    new SwingPaint().show();
  }

  public void show()
  {
    // create main frame
    JFrame frame = new JFrame("Line Tool");
    Container content = frame.getContentPane();
    // set layout on content pane
    content.setLayout(new BorderLayout());
    // create draw area
    drawArea = new LineDrawingTool();

    // add to content pane
    content.add(drawArea, BorderLayout.CENTER);

    // create controls to apply colors and call clear feature
    JPanel controls = new JPanel();

    clearBtn = new JButton("Clear");
    clearBtn.addActionListener(actionListener);
    // add to panel
    controls.add(clearBtn);

    // add to content pane
    content.add(controls, BorderLayout.NORTH);

    frame.setSize(600, 600);
    // can close frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    // show the swing paint result
    frame.setVisible(true);


  }

}


